var _={nativeForEach:Array.prototype.forEach,each:function(e,t,r){if(null==e)return e;if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(t,r);else if(e.length===+e.length){for(var a=0,i=e.length;i>a;a++)if(t.call(r,e[a],a,e)===breaker)return}else for(var n=_.keys(e),a=0,i=n.length;i>a;a++)if(t.call(r,e[n[a]],n[a],e)===breaker)return;return e},slice:Array.prototype.slice,extend:function(e){return this.each(this.slice.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e}};angular.module("ngReactGrid",[]).directive("ngReactGrid",["ngReactGrid",function(e){return{restrict:"E",link:function(t,r,a){new e(t,r,a)}}}]).factory("ngReactGrid",function(){var e=function(e,t,r){this.scope=e,this.element=t[0],this.attrs=r,this.grid={columnDefs:[],data:[],height:500,totalCount:0,currentPage:1,pageSize:25,pageSizes:[25,50,100,500],scrollbarWidth:this.getScrollbarWidth(),_nextPage:function(){},_prevPage:function(){},_goToPage:function(){},_sort:function(){},_columnResize:function(){},_autoColumnResize:function(){}},e.$watch("grid.data",function(e){_.extend(this.grid,{data:e}),this.render()}.bind(this)),this.update(e.grid),this.render()};return e.prototype.update=function(e){this.grid=_.extend(this.grid,e),this.grid.totalCount=this.grid.data.length},e.prototype.render=function(){React.renderComponent(ngReactGridComponent({grid:this.grid}),this.element)},e.prototype.getScrollbarWidth=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var r=document.createElement("div");r.style.width="100%",e.appendChild(r);var a=r.offsetWidth;return e.parentNode.removeChild(e),t-a},e});var ngReactGridComponent=function(){var e=window.innerWidth,t=(window.innerHeight,function(t){var r=String(t.width).replace("px",""),a=-1!==r.indexOf("%");if(a){var i=Math.floor(parseInt(r)*e/100);t.width=i}}),r=function(e,r,a){r.width||(r.width="10%"),e.horizontalScroll&&t(r),a.width=r.width},a=function(){var e=React.createClass({displayName:"ngGridHeaderCell",render:function(){var e={};return r(this.props.grid,this.props.cell,e,this.props.last),React.DOM.th({title:this.props.cell.displayName,style:e},React.DOM.div(null,this.props.cell.displayName))}}),t=React.createClass({displayName:"ngReactGridShowPerPage",render:function(){var e=this.props.grid.pageSizes.map(function(e){return React.DOM.option({value:e},e)});return React.DOM.div({className:"ngReactGridShowPerPage"},"Show ",React.DOM.select(null,e)," entries")}}),a=React.createClass({displayName:"ngReactGridSearch",render:function(){return React.DOM.div({className:"ngReactGridSearch"},React.DOM.input({type:"search",placeholder:"Search..."}))}});return React.createClass({render:function(){var r=this.props.grid.columnDefs.length,i=this.props.grid.columnDefs.map(function(t,a){var i=r-1===a;return e({key:a,cell:t,index:a,grid:this.props.grid,last:i})}.bind(this)),n={width:"calc(100% - "+this.props.grid.scrollbarWidth+"px)"},c={paddingRight:this.props.grid.horizontalScroll?this.props.grid.scrollbarWidth:0};return React.DOM.div(null,React.DOM.div({className:"ngReactGridHeaderToolbarWrapper"},t({grid:this.props.grid}),a({grid:this.props.grid})),React.DOM.div({className:"ngReactGridHeaderWrapper"},React.DOM.div({className:"ngReactGridHeader",style:c},React.DOM.div({className:"ngReactGridHeaderInner"},React.DOM.table({style:n},React.DOM.thead(null,React.DOM.tr(null,i)))))))}})}(),i=function(){var e=React.createClass({displayName:"ngReactGridBodyRowCell",render:function(){var e=this.props.row[this.props.cell.field],t={};return r(this.props.grid,this.props.cell,t,this.props.last,!0),React.DOM.td({style:t,title:e},React.DOM.div(null,e))}}),t=React.createClass({displayName:"ngReactGridBodyRow",render:function(){var t=this.props.grid.columnDefs.length,r=this.props.grid.columnDefs.map(function(r,a){var i=t-1===a;return e({key:a,cell:r,row:this.props.row,grid:this.props.grid,last:i})}.bind(this));return React.DOM.tr(null,r)}});return React.createClass({getInitialState:function(){return{fullRender:!1,needsUpdate:!1}},calculateNeedsUpdate:function(){this.props.grid.data.length>100&&this.setState({needsUpdate:!0})},componentWillMount:function(){this.calculateNeedsUpdate()},componentWillReceiveProps:function(){this.calculateNeedsUpdate()},componentDidMount:function(){var e=this.getDOMNode(),t=document.querySelector(".ngReactGridHeaderInner"),r=document.querySelector(".ngReactGridViewPort");e.firstChild.addEventListener("scroll",function(){t.scrollLeft=r.scrollLeft}),this.state.needsUpdate&&this.setState({fullRender:!0,needsUpdate:!1})},render:function(){var e,r=function(e,r){return t({key:r,row:e,columns:this.props.columnDefs,grid:this.props.grid})}.bind(this);e=this.state.fullRender?this.props.grid.data.map(r):this.props.grid.data.slice(0,100).map(r);var a={},i={};return this.props.grid.horizontalScroll?i.width="calc(100% - "+this.props.grid.scrollbarWidth+"px)":a.overflowX="hidden",React.DOM.div({className:"ngReactGridBody"},React.DOM.div({className:"ngReactGridViewPort",style:a},React.DOM.div({className:"ngReactGridInnerViewPort"},React.DOM.table({style:i},React.DOM.tbody(null,e)))))}})}(),n=function(){var e=React.createClass({displayName:"ngReactGridStatus",render:function(){return React.DOM.div({className:"ngReactGridStatus"},React.DOM.div(null,"Showing ",React.DOM.strong(null,"1")," to ",React.DOM.strong(null,"10")," of ",React.DOM.strong(null,this.props.grid.totalCount)," entries"))}}),t=React.createClass({displayName:"ngReactGridPagination",render:function(){return React.DOM.div({className:"ngReactGridPagination"},React.DOM.ul(null,React.DOM.li(null,React.DOM.a({href:"#"},"Prev")),React.DOM.li(null,React.DOM.a({href:"#"},"First")),React.DOM.li(null,React.DOM.a({href:"#"},"1")),React.DOM.li(null,React.DOM.a({href:"#"},"2")),React.DOM.li(null,React.DOM.a({href:"#"},"3")),React.DOM.li(null,React.DOM.a({href:"#"},"4")),React.DOM.li(null,React.DOM.a({href:"#"},"5")),React.DOM.li(null,React.DOM.a({href:"#"},"Last")),React.DOM.li(null,React.DOM.a({href:"#"},"Next"))))}});return React.createClass({render:function(){return React.DOM.div({className:"ngReactGridFooter"},e({grid:this.props.grid}),t({grid:this.props.grid}))}})}(),c=React.createClass({displayName:"ngReactGrid",render:function(){return React.DOM.div({className:"ngReactGrid"},a({grid:this.props.grid}),i({grid:this.props.grid}),n({grid:this.props.grid}))}});return c}();