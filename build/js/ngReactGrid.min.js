var _={nativeForEach:Array.prototype.forEach,each:function(e,t,r){if(null==e)return e;if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,n=e.length;n>i;i++)if(t.call(r,e[i],i,e)===breaker)return}else for(var a=_.keys(e),i=0,n=a.length;n>i;i++)if(t.call(r,e[a[i]],a[i],e)===breaker)return;return e},slice:Array.prototype.slice,extend:function(e){return this.each(this.slice.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e}};angular.module("ngReactGrid",[]).directive("ngReactGrid",["ngReactGrid",function(e){return{restrict:"E",link:function(t,r,i){new e(t,r,i)}}}]).factory("ngReactGrid",function(){var e=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var r=document.createElement("div");r.style.width="100%",e.appendChild(r);var i=r.offsetWidth;return e.parentNode.removeChild(e),t-i},t=function(t,r){var i=function(e){React.renderComponent(ngReactGridComponent({grid:e}),r[0])},n={columnDefs:[],data:[],height:500,scrollbarWidth:e(),sort:function(){},columnResize:function(){},autoColumnResize:function(){}},a=_.extend(n,t.grid);t.$watch("grid.data",function(e){_.extend(a,{data:e}),i(a)}),i(a)};return t});var ngReactGridComponent=function(){var e=window.innerWidth,t=(window.innerHeight,function(t){var r=String(t.width).replace("px",""),i=-1!==r.indexOf("%");if(i){var n=Math.floor(parseInt(r)*e/100);t.width=n}}),r=function(e,r,i){r.width||(r.width="10%"),e.horizontalScroll&&t(r),i.width=r.width},i=function(){var e=React.createClass({displayName:"ngGridHeaderCell",render:function(){var e={};return r(this.props.grid,this.props.cell,e,this.props.last),React.DOM.th({title:this.props.cell.displayName,style:e},React.DOM.div(null,this.props.cell.displayName))}});return React.createClass({render:function(){var t=this.props.grid.columnDefs.length,r=this.props.grid.columnDefs.map(function(r,i){var n=t-1===i;return e({key:i,cell:r,index:i,grid:this.props.grid,last:n})}.bind(this)),i={width:"calc(100% - "+this.props.grid.scrollbarWidth+"px)"},n={paddingRight:this.props.grid.horizontalScroll?this.props.grid.scrollbarWidth:0};return React.DOM.div({className:"ngReactGridHeaderWrapper"},React.DOM.div({className:"ngReactGridHeader",style:n},React.DOM.div(null),React.DOM.div({className:"ngReactGridHeaderInner"},React.DOM.table({style:i},React.DOM.thead(null,React.DOM.tr(null,r))))))}})}(),n=function(){var e=React.createClass({displayName:"ngReactGridBodyRowCell",render:function(){var e=this.props.row[this.props.cell.field],t={};return r(this.props.grid,this.props.cell,t,this.props.last,!0),React.DOM.td({style:t,title:e},React.DOM.div(null,e))}}),t=React.createClass({displayName:"ngReactGridBodyRow",render:function(){var t=this.props.grid.columnDefs.length,r=this.props.grid.columnDefs.map(function(r,i){var n=t-1===i;return e({key:i,cell:r,row:this.props.row,grid:this.props.grid,last:n})}.bind(this));return React.DOM.tr(null,r)}});return React.createClass({getInitialState:function(){return{fullRender:!1,needsUpdate:!1}},calculateIfNeedsUpdate:function(){this.props.grid.data.length>100&&this.setState({needsUpdate:!0})},componentWillMount:function(){this.calculateIfNeedsUpdate()},componentWillReceiveProps:function(){this.calculateIfNeedsUpdate()},componentDidMount:function(){var e=this.getDOMNode(),t=document.querySelector(".ngReactGridHeaderInner"),r=document.querySelector(".ngReactGridViewPort");e.firstChild.addEventListener("scroll",function(){t.scrollLeft=r.scrollLeft}),this.state.needsUpdate&&this.setState({fullRender:!0,needsUpdate:!1})},render:function(){var e,r=function(e,r){return t({key:r,row:e,columns:this.props.columnDefs,grid:this.props.grid})}.bind(this);e=this.state.fullRender?this.props.grid.data.map(r):this.props.grid.data.slice(0,100).map(r);var i={};return this.props.grid.horizontalScroll||(i.overflowX="hidden"),React.DOM.div({className:"ngReactGridBody"},React.DOM.div({className:"ngReactGridViewPort",style:i},React.DOM.div({className:"ngReactGridInnerViewPort"},React.DOM.table(null,React.DOM.tbody(null,e)))))}})}(),a=function(){return React.createClass({render:function(){return React.DOM.div({className:"ngReactGridFooter"},"-")}})}(),s=React.createClass({displayName:"ngReactGrid",render:function(){return React.DOM.div({className:"ngReactGrid"},i({grid:this.props.grid}),n({grid:this.props.grid}),a({grid:this.props.grid}))}});return s}();